<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Drum Machine with Words</title>
  <style>
    body { font-family: sans-serif; margin: 2em; background:#fafafa; }
    h1, h2 { font-weight: 600; }
    .pill { display:inline-block; margin:4px; padding:6px 10px; border-radius:16px;
            background:#eee; cursor:pointer; }
    .pill.active { background:#ffd966; font-weight:600; }
    .pill.d2 { background:#cfe9ff; border:1px solid #87bfff; font-weight:600; }
    video { max-width: 600px; border-radius: 8px; margin-top: 1em; }
    #controls { margin-top: 1em; }
  </style>
</head>
<body>

<h1>Word-Powered Drum Machine</h1>

<p>
We’re exploring a fun way to combine **words** with **music**.
Kids can type a word, and we fetch <strong>synonyms</strong> and <strong>antonyms</strong> 
to drive sound changes — rhythm, brightness, tempo, and stereo panning.
The more words they activate, the more the beat evolves.
</p>

<div id="controls">
  <input id="q" placeholder="enter a word…" />
  <button id="go">Suggest</button>
</div>

<h2>Synonyms</h2>
<div id="syn"></div>

<h2>Antonyms</h2>
<div id="ant"></div>

<h2>How It Works</h2>
<p>
This project combines a simple web frontend (built with <strong>HTML</strong>, 
<strong>CSS</strong>, and <strong>JavaScript</strong>) with a live coding 
audio engine powered by <strong>ChucK</strong> and 
<strong>ChuGL</strong>.
</p>

<p>
The browser interface lets you type in words, which are sent through the 
<strong>Datamuse API</strong> to fetch synonyms and antonyms. 
These words are then forwarded to ChucK via <strong>OSC messages</strong>, 
where they directly control musical parameters like rhythm, brightness, 
and density. 
ChuGL is used to render a simple graphical HUD that shows your active 
synonyms and antonyms in sync with the beat.
</p>

<p>
In the future, we will expand this into a full <em>word-driven drum machine</em>, 
where words create rhythms, patterns, and dynamic visuals — making music 
both playful and interactive.
</p>


<h2>Video</h2>
<p>
Here are some sample interaction designs we created to accompany our drum machine
and catch kids’ attention:
</p>
<video src="demo.mp4" controls></video>

<script>
const synEl = document.getElementById('syn');
const antEl = document.getElementById('ant');
const qEl   = document.getElementById('q');

let active = { syn: new Map(), ant: new Map() };

function renderPills(root, words, kind){
  root.innerHTML = '';
  words.forEach(w => {
    const el = document.createElement('span');
    el.textContent = w;
    el.className = 'pill';
    el.title = 'Click to toggle • Shift+Click = Dominant';
    el.onclick = (ev) => {
      const dominant = ev.shiftKey;
      if (active[kind].has(w)) {
        active[kind].delete(w);
        el.classList.remove('active','d2');
      } else {
        active[kind].set(w, dominant ? 2 : 1);
        el.classList.add('active');
        if (dominant) el.classList.add('d2');
      }
      updateEngineParams();
    };
    root.appendChild(el);
  });
}

function updateEngineParams(){
  // placeholder: log weights
  console.log("SYN:", [...active.syn.entries()],
              "ANT:", [...active.ant.entries()]);
  // TODO: connect to audio engine later
}

async function suggest(){
  const q = qEl.value.trim();
  if(!q) return;
  const syn = await fetch("https://api.datamuse.com/words?rel_syn=" + q)
                     .then(r=>r.json());
  const ant = await fetch("https://api.datamuse.com/words?rel_ant=" + q)
                     .then(r=>r.json());
  renderPills(synEl, syn.map(x=>x.word), "syn");
  renderPills(antEl, ant.map(x=>x.word), "ant");
}

document.getElementById('go').onclick = suggest;
qEl.addEventListener('keydown', e => {
  if (e.key === 'Enter') document.getElementById('go').click();
});
</script>

</body>
</html>

